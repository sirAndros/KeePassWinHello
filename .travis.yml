language: csharp
solution: src/KeePassWinHello.sln

addons:
  apt:
    packages:
      - openjdk-8-jdk
      - npm
      - unzip
  sonarcloud:
    organization: "sirandros-github"

jdk:
  - oraclejdk8

script:
  - wget https://sourceforge.net/projects/keepass/files/KeePass%202.x/2.42.1/KeePass-2.42.1.zip
  - unzip KeePass-2.42.1.zip -d lib
  - msbuild /p:Configuration=Release src/KeePassWinHello.sln
  - sonar-scanner
  - npm install -g snyk
  - snyk test ./src

cache:
  directories:
    - '$HOME/.sonar/cache'
